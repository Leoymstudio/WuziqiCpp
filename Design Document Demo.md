### 第一部分：设计文档 (Design Document)

**项目名称：** Gomoku-CLI-Master
**编程语言：** C++ (Standard 17 or 20 recommended)
**风格要求：** 面向对象 (OOP)，匈牙利命名法
**核心算法：** 蒙特卡洛树搜索 (MCTS) 或 启发式Minimax (用于PvE)

#### 1. 系统架构设计 (Class Hierarchy)

根据要求，我们将系统划分为以下核心类：

* **`CBoard` (棋盘类):**
* 负责维护一个 15x15 的二维数组数据结构。
* 负责渲染您提供的特定 ASCII 棋盘 。


* **关键功能：** 必须处理好“最后一步”的特殊显示（例如用不同颜色或光标标记），以及将`1` (黑) 和 `2` (白) 替换为全角字符 `●` 和 `○`，同时保持表格对齐。


* **`CPiece` (棋子类):**
* 定义棋子的属性（颜色、位置 `x, y`）。


* **`CReferee` (裁判类) - 核心逻辑:**
* 
**胜负判定：** 检查横、竖、斜方向是否有连续5子 。


* **禁手逻辑 (Forbidden Move):** 专门针对黑棋。需实现算法检测：
* **长连 (Overline):** 超过5个连续黑子。
* **三三禁手 (3-3):** 一子落下同时形成两个活三。
* **四四禁手 (4-4):** 一子落下同时形成两个四（包括冲四和活四）。


* 
**优先级规则：** 如果五连和禁手同时形成，判定为黑胜 。




* **`CPlayer` (棋手基类):**
* 虚函数 `MakeMove()`。


* **`CHumanPlayer` (人类玩家):**
* 处理标准键盘输入（行列坐标）。


* **`CAIPlayer` (AI玩家):**
* 使用 **蒙特卡洛树搜索 (MCTS)** 进行落子决策，以满足高难度和原创性要求。


* **`CClock` (时钟类):**
* 利用 `std::chrono` 和 `std::future` 实现 15秒倒计时。若超时，通知裁判判负 。




* **`CGameManager` (游戏管理类):**
* 控制游戏流程（初始化 -> 循环落子 -> 判定 -> 结束）。
* 开局“剪刀石头布”逻辑 。





#### 2. 关键技术难点解决方案

* **15秒限时输入:** 标准 `cin` 是阻塞的。解决方案是使用 `std::async` 开启一个异步任务来获取输入，主线程进行计时。如果 15秒内 `future` 状态未就绪，则判定超时。
* **界面对齐:** 棋盘边缘字符（如 `┌`, `┬`）与中间的 `┼` 以及棋子 `●` 必须均为全角字符（占用2个字节或宽度等同），否则落子后棋盘会错位。


